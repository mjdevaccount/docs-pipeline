# Documentation Pipeline Configuration
# ===================================
#
# This YAML file orchestrates the complete documentation generation workflow:
# 1. Generate architecture diagrams from Structurizr DSL
# 2. Convert Markdown documents to PDF/DOCX/HTML
#
# Usage:
#   python -m tools.docs_pipeline.cli --config docs-pipeline.yaml

workspaces:
  # Example workspace: Project Documentation
  project-docs:
    diagrams:
      # Structurizr workspace file (.dsl or .json)
      # Generate diagrams from this architecture model
      workspace: docs/development/architecture.dsl
      # Alternative: use 'dsl' (legacy, still supported)
      # dsl: docs/development/architecture.dsl
      
      # Optional: Workspace directory containing supporting files
      # If not specified, uses the parent directory of the workspace file
      # workspace_dir: docs/development/structurizr-workspace
      
      # Optional: Additional resource directories (images, styles, etc.)
      # These will be available to the Structurizr CLI during export
      # resources:
      #   - docs/images
      #   - docs/styles
      
      # Export formats for diagrams
      # Options: mermaid, plantuml, png, svg, html
      formats: ["mermaid"]
      
      # Output directory for generated diagrams
      # These will be embedded in your Markdown documents
      output_dir: docs/diagrams
      
      # Optional: Custom Docker image for Structurizr CLI
      # image: structurizr/cli:latest

    documents:
      # Document 1: Main architecture document
      - input: docs/development/architecture-proposal.md
        output: docs/examples/generated/architecture-proposal.pdf
        format: pdf
        profile: enterprise  # Optional: PDF profile (see tools/pdf/profiles.py)

      # Document 2: Technical specification
      - input: docs/development/technical-spec.md
        output: docs/examples/generated/technical-spec.pdf
        format: pdf
        profile: project-docs

      # Document 3: Executive summary (DOCX for Word editing)
      - input: docs/development/executive-summary.md
        output: docs/examples/generated/executive-summary.docx
        format: docx

  # Example workspace with metadata options
  default:
    # Workspace-level defaults (can be overridden per document)
    defaults:
      author: "Your Name"
      organization: "Your Company"
      logo: "path/to/logo.png"
      generate_toc: true
      generate_cover: true
      renderer: "playwright"
      profile: "tech-whitepaper"
    
    documents:
      - input: docs/report.md
        output: output/report.pdf
        format: pdf
        renderer: playwright
        profile: tech-whitepaper
        
        # Document-specific metadata (overrides defaults)
        metadata:
          title: "Technical Specification"  # Override markdown frontmatter
          author: "John Doe"
          organization: "Acme Corp"
          date: "December 2024"
          version: "2.0"
          type: "Technical Report"
          classification: "CONFIDENTIAL"
        
        # Cover page options (Playwright only)
        cover:
          enabled: true
          logo: "docs/acme-logo.png"
          background_color: "#1a202c"  # Optional
          text_color: "#ffffff"         # Optional
        
        # Table of contents (Playwright only)
        toc:
          enabled: true
          depth: 3  # Heading levels to include
        
        # Watermark (Playwright only)
        watermark: "DRAFT"  # Optional

  # Example workspace: SOLID Principles Documentation
  solid-docs:
    diagrams:
      # If you have Structurizr DSL for system architecture
      dsl: docs/development/system-architecture.dsl
      formats: ["mermaid", "png"]
      output_dir: docs/diagrams

    documents:
      # SOLID implementation analysis
      - input: docs/development/pdf-solid-implementation.md
        output: docs/examples/generated/solid-implementation.pdf
        format: pdf
        profile: enterprise

      # Structurizr evaluation
      - input: docs/development/structurizr-solid-evaluation.md
        output: docs/examples/generated/structurizr-evaluation.pdf
        format: pdf
        profile: enterprise

# Notes:
# - Diagrams are generated FIRST, then documents (so diagrams are available for embedding)
# - Diagrams are embedded in Markdown via Mermaid code blocks or image references
# - If output is not specified, it defaults to same name with .pdf/.docx extension
# - PDF profiles control styling (see tools/pdf/profiles.py)
# - All paths are relative to repository root
# - Structurizr workspace: The workspace file (.dsl or .json) and all supporting files
#   (images, styles, etc.) should be in the same directory or subdirectories.
#   Use 'workspace_dir' to specify the root directory containing all workspace files.

